---
title: 快速开始
description: 快速启动各子项目与文档预览
editLink: true
outline: deep
---

# 快速开始

> [!NOTE]
> 开发规范：本地启动 Docker（PostgreSQL / Redis / Mongo），生成 Thrift 契约与初始化基础数据，然后按需启动各子项目。当前仅提供本地 `dev` 环境。
>
> 建议顺序：`pnpm i` → `dev:infra` → 后端/后台 → 可选前端与 BFF → 文档预览/构建。需要后台或后端时，`backend-integrated` 与 `backoffice` 在首次运行前必须执行 `dev:infra`。

## 安装依赖

```bash
pnpm i
```

## 初始化基础设施与生成 IDL

```bash
pnpm run dev:infra
```

> [!TIP]
> `dev:infra` 会初始化数据库与运行迁移，并生成 Thrift IDL 类型；如环境未就绪，请先完成 [环境搭建](/src/入门指南/环境搭建) 的 Docker 与 Thrift 步骤。
>
> 脚本说明：`dev:infra` 等价于执行 `turbo run db:init --filter=@csisp/infra-database` 与 `turbo run idl:gen --filter=@csisp/idl`，分别负责数据库初始化与契约类型生成。

## 启动后端与后台（按需选择）

```bash
# 后端集成服务
pnpm run dev:backend-integrated

# 后台管理系统
pnpm run dev:backoffice
```

说明：

- `dev:backend-integrated` 会先执行 `db:types`（生成数据库类型）再启动后端开发服务（NestJS）
- `dev:backoffice` 会先执行 `db:types`（生成数据库类型）再启动后台开发服务（Next.js）

## 启动 BFF 与前端（可选）

```bash
# BFF 聚合层
pnpm run dev:bff

# 前端管理端
pnpm run dev:admin

# 前端门户
pnpm run dev:portal
```

> [!TIP]
> 每个子项目均可单独启动进行调试；仅在需要依赖数据库或契约时，确保先执行 `dev:infra`。
>
> 脚本说明：

- `dev:bff` 启动 Koa 聚合层开发服务
- `dev:admin` 启动中台前端开发服务（Vue3）
- `dev:portal` 启动门户前端开发服务（Vue3）

## 文档站点（预览与构建）

```bash
# 文档预览（本地开发）
pnpm --filter @csisp/docs dev

# 文档构建（校验无误后）
pnpm --filter @csisp/docs build

# 文档构建后的本地预览
pnpm --filter @csisp/docs preview
```

> [!IMPORTANT]
> 每次撰写或更新文档后，必须执行一次 `pnpm --filter @csisp/docs build` 以确保没有编译错误。

## 常见问题与提示

- 端口占用：请检查正在运行的进程或修改各项目的端口配置
- 环境变量缺失：按“环境搭建”中的 `.env` 示例补齐键名（如 `DATABASE_URL`、`REDIS_URL`、`MONGO_URL`）
- 初次启动失败：优先执行根脚本 `init_mac.sh` / `init_linux.sh` / `init_windows.bat`，再执行 `dev:infra`
