# 类型兼容性验证报告

## 范围

- 比对 `packages/types` 的领域类型、`apps/backend/src/types/models.ts` 的 ORM 细化类型与 Sequelize CLI 模型的字段映射

## 新增/补齐类型

- `SubCourseModel`：`{ id, courseId, subCourseCode, teacherId, academicYear, status, createdAt, updatedAt }`
- `CourseTeacherModel`：`{ courseId, teacherId, createdAt?, updatedAt? }`
- `HomeworkFileModel`：`{ id, submissionId, fileName, filePath, fileSize?, fileType?, uploadTime?, createdAt, updatedAt }`
- `Models` 接口新增：`SubCourse/CourseTeacher/HomeworkFile`

## 字段映射规范

- ORM 层（Sequelize）：`snake_case`（如 `student_id/enrollment_year/real_name`）
- 领域/响应层：`camelCase`（如 `studentId/enrollmentYear/realName`）
- 服务层负责映射（示例：用户注册 `student_id ← studentId`）

## 检查结论

- 运行时模型通过 `src/databases` 适配层加载，关联与 CLI 等价
- `ServiceFactory` 依赖的模型在 `Models` 全部存在
- 分页、CRUD 模板与现有服务层保持一致性

## 后续建议

- 为高频查询添加 `distinct: true` 以防 `count` 重复（如多表 `include`）
- 按需在 CLI 迁移中补充索引与约束，提升查询与一致性保障
